/**
 * colorbrewer.js
 * An implementation of the ColorBrewer color schemes for i2maps.
 * 2012 by Christian Kaiser <chri.kais@gmail.com>
 * Compress this file with a JS minimizer (e.g. jscompress.com)
 */
var colortables = {
    "accent3": {"type": "qual", "colors": [[127,201,127], [190,174,212], [253,192,134]]},
    "accent4": {"type": "qual", "colors": [[127,201,127], [190,174,212], [253,192,134], [255,255,153]]},
    "accent5": {"type": "qual", "colors": [[127,201,127], [190,174,212], [253,192,134], [255,255,153], [56,108,176]]},
    "accent6": {"type": "qual", "colors": [[127,201,127], [190,174,212], [253,192,134], [255,255,153], [56,108,176], [240,2,127]]},
    "accent7": {"type": "qual", "colors": [[127,201,127], [190,174,212], [253,192,134], [255,255,153], [56,108,176], [240,2,127], [191,91,23]]},
    "accent8": {"type": "qual", "colors": [[127,201,127], [190,174,212], [253,192,134], [255,255,153], [56,108,176], [240,2,127], [191,91,23], [102,102,102]]},
    "blues3": {"type": "seq", "colors": [[222,235,247], [158,202,225], [49,130,189]]},
    "blues4": {"type": "seq", "colors": [[239,243,255], [189,215,231], [107,174,214], [33,113,181]]},
    "blues5": {"type": "seq", "colors": [[239,243,255], [189,215,231], [107,174,214], [49,130,189], [8,81,156]]},
    "blues6": {"type": "seq", "colors": [[239,243,255], [198,219,239], [158,202,225], [107,174,214], [49,130,189], [8,81,156]]},
    "blues7": {"type": "seq", "colors": [[239,243,255], [198,219,239], [158,202,225], [107,174,214], [66,146,198], [33,113,181], [8,69,148]]},
    "blues8": {"type": "seq", "colors": [[247,251,255], [222,235,247], [198,219,239], [158,202,225], [107,174,214], [66,146,198], [33,113,181], [8,69,148]]},
    "blues9": {"type": "seq", "colors": [[247,251,255], [222,235,247], [198,219,239], [158,202,225], [107,174,214], [66,146,198], [33,113,181], [8,81,156], [8,48,107]]},
    "brbg10": {"type": "div", "crit_val": 5.5, "colors": [[84,48,5], [140,81,10], [191,129,45], [223,194,125], [246,232,195], [199,234,229], [128,205,193], [53,151,143], [1,102,94], [0,60,48]]},
    "brbg11": {"type": "div", "crit_val": 6.0, "colors": [[84,48,5], [140,81,10], [191,129,45], [223,194,125], [246,232,195], [245,245,245], [199,234,229], [128,205,193], [53,151,143], [1,102,94], [0,60,48]]},
    "brbg3": {"type": "div", "crit_val": 2.0, "colors": [[216,179,101], [245,245,245], [90,180,172]]},
    "brbg4": {"type": "div", "crit_val": 2.5, "colors": [[166,97,26], [223,194,125], [128,205,193], [1,133,113]]},
    "brbg5": {"type": "div", "crit_val": 3.0, "colors": [[166,97,26], [223,194,125], [245,245,245], [128,205,193], [1,133,113]]},
    "brbg6": {"type": "div", "crit_val": 3.5, "colors": [[140,81,10], [216,179,101], [246,232,195], [199,234,229], [90,180,172], [1,102,94]]},
    "brbg7": {"type": "div", "crit_val": 4.0, "colors": [[140,81,10], [216,179,101], [246,232,195], [245,245,245], [199,234,229], [90,180,172], [1,102,94]]},
    "brbg8": {"type": "div", "crit_val": 4.5, "colors": [[140,81,10], [191,129,45], [223,194,125], [246,232,195], [199,234,229], [128,205,193], [53,151,143], [1,102,94]]},
    "brbg9": {"type": "div", "crit_val": 5.0, "colors": [[140,81,10], [191,129,45], [223,194,125], [246,232,195], [245,245,245], [199,234,229], [128,205,193], [53,151,143], [1,102,94]]},
    "bugn3": {"type": "seq", "colors": [[229,245,249], [153,216,201], [44,162,95]]},
    "bugn4": {"type": "seq", "colors": [[237,248,251], [178,226,226], [102,194,164], [35,139,69]]},
    "bugn5": {"type": "seq", "colors": [[237,248,251], [178,226,226], [102,194,164], [44,162,95], [0,109,44]]},
    "bugn6": {"type": "seq", "colors": [[237,248,251], [204,236,230], [153,216,201], [102,194,164], [44,162,95], [0,109,44]]},
    "bugn7": {"type": "seq", "colors": [[237,248,251], [204,236,230], [153,216,201], [102,194,164], [65,174,118], [35,139,69], [0,88,36]]},
    "bugn8": {"type": "seq", "colors": [[247,252,253], [229,245,249], [204,236,230], [153,216,201], [102,194,164], [65,174,118], [35,139,69], [0,88,36]]},
    "bugn9": {"type": "seq", "colors": [[247,252,253], [229,245,249], [204,236,230], [153,216,201], [102,194,164], [65,174,118], [35,139,69], [0,109,44], [0,68,27]]},
    "bupu3": {"type": "seq", "colors": [[224,236,244], [158,188,218], [136,86,167]]},
    "bupu4": {"type": "seq", "colors": [[237,248,251], [179,205,227], [140,150,198], [136,65,157]]},
    "bupu5": {"type": "seq", "colors": [[237,248,251], [179,205,227], [140,150,198], [136,86,167], [129,15,124]]},
    "bupu6": {"type": "seq", "colors": [[237,248,251], [191,211,230], [158,188,218], [140,150,198], [136,86,167], [129,15,124]]},
    "bupu7": {"type": "seq", "colors": [[237,248,251], [191,211,230], [158,188,218], [140,150,198], [140,107,177], [136,65,157], [110,1,107]]},
    "bupu8": {"type": "seq", "colors": [[247,252,253], [224,236,244], [191,211,230], [158,188,218], [140,150,198], [140,107,177], [136,65,157], [110,1,107]]},
    "bupu9": {"type": "seq", "colors": [[247,252,253], [224,236,244], [191,211,230], [158,188,218], [140,150,198], [140,107,177], [136,65,157], [129,15,124], [77,0,75]]},
    "dark23": {"type": "qual", "colors": [[27,158,119], [217,95,2], [117,112,179]]},
    "dark24": {"type": "qual", "colors": [[27,158,119], [217,95,2], [117,112,179], [231,41,138]]},
    "dark25": {"type": "qual", "colors": [[27,158,119], [217,95,2], [117,112,179], [231,41,138], [102,166,30]]},
    "dark26": {"type": "qual", "colors": [[27,158,119], [217,95,2], [117,112,179], [231,41,138], [102,166,30], [230,171,2]]},
    "dark27": {"type": "qual", "colors": [[27,158,119], [217,95,2], [117,112,179], [231,41,138], [102,166,30], [230,171,2], [166,118,29]]},
    "dark28": {"type": "qual", "colors": [[27,158,119], [217,95,2], [117,112,179], [231,41,138], [102,166,30], [230,171,2], [166,118,29], [102,102,102]]},
    "gnbu3": {"type": "seq", "colors": [[224,243,219], [168,221,181], [67,162,202]]},
    "gnbu4": {"type": "seq", "colors": [[240,249,232], [186,228,188], [123,204,196], [43,140,190]]},
    "gnbu5": {"type": "seq", "colors": [[240,249,232], [186,228,188], [123,204,196], [67,162,202], [8,104,172]]},
    "gnbu6": {"type": "seq", "colors": [[240,249,232], [204,235,197], [168,221,181], [123,204,196], [67,162,202], [8,104,172]]},
    "gnbu7": {"type": "seq", "colors": [[240,249,232], [204,235,197], [168,221,181], [123,204,196], [78,179,211], [43,140,190], [8,88,158]]},
    "gnbu8": {"type": "seq", "colors": [[247,252,240], [224,243,219], [204,235,197], [168,221,181], [123,204,196], [78,179,211], [43,140,190], [8,88,158]]},
    "gnbu9": {"type": "seq", "colors": [[247,252,240], [224,243,219], [204,235,197], [168,221,181], [123,204,196], [78,179,211], [43,140,190], [8,104,172], [8,64,129]]},
    "greens3": {"type": "seq", "colors": [[229,245,224], [161,217,155], [49,163,84]]},
    "greens4": {"type": "seq", "colors": [[237,248,233], [186,228,179], [116,196,118], [35,139,69]]},
    "greens5": {"type": "seq", "colors": [[237,248,233], [186,228,179], [116,196,118], [49,163,84], [0,109,44]]},
    "greens6": {"type": "seq", "colors": [[237,248,233], [199,233,192], [161,217,155], [116,196,118], [49,163,84], [0,109,44]]},
    "greens7": {"type": "seq", "colors": [[237,248,233], [199,233,192], [161,217,155], [116,196,118], [65,171,93], [35,139,69], [0,90,50]]},
    "greens8": {"type": "seq", "colors": [[247,252,245], [229,245,224], [199,233,192], [161,217,155], [116,196,118], [65,171,93], [35,139,69], [0,90,50]]},
    "greens9": {"type": "seq", "colors": [[247,252,245], [229,245,224], [199,233,192], [161,217,155], [116,196,118], [65,171,93], [35,139,69], [0,109,44], [0,68,27]]},
    "greys3": {"type": "seq", "colors": [[240,240,240], [189,189,189], [99,99,99]]},
    "greys4": {"type": "seq", "colors": [[247,247,247], [204,204,204], [150,150,150], [82,82,82]]},
    "greys5": {"type": "seq", "colors": [[247,247,247], [204,204,204], [150,150,150], [99,99,99], [37,37,37]]},
    "greys6": {"type": "seq", "colors": [[247,247,247], [217,217,217], [189,189,189], [150,150,150], [99,99,99], [37,37,37]]},
    "greys7": {"type": "seq", "colors": [[247,247,247], [217,217,217], [189,189,189], [150,150,150], [115,115,115], [82,82,82], [37,37,37]]},
    "greys8": {"type": "seq", "colors": [[255,255,255], [240,240,240], [217,217,217], [189,189,189], [150,150,150], [115,115,115], [82,82,82], [37,37,37]]},
    "greys9": {"type": "seq", "colors": [[255,255,255], [240,240,240], [217,217,217], [189,189,189], [150,150,150], [115,115,115], [82,82,82], [37,37,37], [0,0,0]]},
    "oranges3": {"type": "seq", "colors": [[254,230,206], [253,174,107], [230,85,13]]},
    "oranges4": {"type": "seq", "colors": [[254,237,222], [253,190,133], [253,141,60], [217,71,1]]},
    "oranges5": {"type": "seq", "colors": [[254,237,222], [253,190,133], [253,141,60], [230,85,13], [166,54,3]]},
    "oranges6": {"type": "seq", "colors": [[254,237,222], [253,208,162], [253,174,107], [253,141,60], [230,85,13], [166,54,3]]},
    "oranges7": {"type": "seq", "colors": [[254,237,222], [253,208,162], [253,174,107], [253,141,60], [241,105,19], [217,72,1], [140,45,4]]},
    "oranges8": {"type": "seq", "colors": [[255,245,235], [254,230,206], [253,208,162], [253,174,107], [253,141,60], [241,105,19], [217,72,1], [140,45,4]]},
    "oranges9": {"type": "seq", "colors": [[255,245,235], [254,230,206], [253,208,162], [253,174,107], [253,141,60], [241,105,19], [217,72,1], [166,54,3], [127,39,4]]},
    "orrd3": {"type": "seq", "colors": [[254,232,200], [253,187,132], [227,74,51]]},
    "orrd4": {"type": "seq", "colors": [[254,240,217], [253,204,138], [252,141,89], [215,48,31]]},
    "orrd5": {"type": "seq", "colors": [[254,240,217], [253,204,138], [252,141,89], [227,74,51], [179,0,0]]},
    "orrd6": {"type": "seq", "colors": [[254,240,217], [253,212,158], [253,187,132], [252,141,89], [227,74,51], [179,0,0]]},
    "orrd7": {"type": "seq", "colors": [[254,240,217], [253,212,158], [253,187,132], [252,141,89], [239,101,72], [215,48,31], [153,0,0]]},
    "orrd8": {"type": "seq", "colors": [[255,247,236], [254,232,200], [253,212,158], [253,187,132], [252,141,89], [239,101,72], [215,48,31], [153,0,0]]},
    "orrd9": {"type": "seq", "colors": [[255,247,236], [254,232,200], [253,212,158], [253,187,132], [252,141,89], [239,101,72], [215,48,31], [179,0,0], [127,0,0]]},
    "paired10": {"type": "qual", "colors": [[166,206,227], [31,120,180], [178,223,138], [51,160,44], [251,154,153], [227,26,28], [253,191,111], [255,127,0], [202,178,214], [106,61,154]]},
    "paired11": {"type": "qual", "colors": [[166,206,227], [31,120,180], [178,223,138], [51,160,44], [251,154,153], [227,26,28], [253,191,111], [255,127,0], [202,178,214], [106,61,154], [255,255,153]]},
    "paired12": {"type": "qual", "colors": [[166,206,227], [31,120,180], [178,223,138], [51,160,44], [251,154,153], [227,26,28], [253,191,111], [255,127,0], [202,178,214], [106,61,154], [255,255,153], [177,89,40]]},
    "paired3": {"type": "qual", "colors": [[166,206,227], [31,120,180], [178,223,138]]},
    "paired4": {"type": "qual", "colors": [[166,206,227], [31,120,180], [178,223,138], [51,160,44]]},
    "paired5": {"type": "qual", "colors": [[166,206,227], [31,120,180], [178,223,138], [51,160,44], [251,154,153]]},
    "paired6": {"type": "qual", "colors": [[166,206,227], [31,120,180], [178,223,138], [51,160,44], [251,154,153], [227,26,28]]},
    "paired7": {"type": "qual", "colors": [[166,206,227], [31,120,180], [178,223,138], [51,160,44], [251,154,153], [227,26,28], [253,191,111]]},
    "paired8": {"type": "qual", "colors": [[166,206,227], [31,120,180], [178,223,138], [51,160,44], [251,154,153], [227,26,28], [253,191,111], [255,127,0]]},
    "paired9": {"type": "qual", "colors": [[166,206,227], [31,120,180], [178,223,138], [51,160,44], [251,154,153], [227,26,28], [253,191,111], [255,127,0], [202,178,214]]},
    "pastel13": {"type": "qual", "colors": [[251,180,174], [179,205,227], [204,235,197]]},
    "pastel14": {"type": "qual", "colors": [[251,180,174], [179,205,227], [204,235,197], [222,203,228]]},
    "pastel15": {"type": "qual", "colors": [[251,180,174], [179,205,227], [204,235,197], [222,203,228], [254,217,166]]},
    "pastel16": {"type": "qual", "colors": [[251,180,174], [179,205,227], [204,235,197], [222,203,228], [254,217,166], [255,255,204]]},
    "pastel17": {"type": "qual", "colors": [[251,180,174], [179,205,227], [204,235,197], [222,203,228], [254,217,166], [255,255,204], [229,216,189]]},
    "pastel18": {"type": "qual", "colors": [[251,180,174], [179,205,227], [204,235,197], [222,203,228], [254,217,166], [255,255,204], [229,216,189], [253,218,236]]},
    "pastel19": {"type": "qual", "colors": [[251,180,174], [179,205,227], [204,235,197], [222,203,228], [254,217,166], [255,255,204], [229,216,189], [253,218,236], [242,242,242]]},
    "pastel23": {"type": "qual", "colors": [[179,226,205], [253,205,172], [203,213,232]]},
    "pastel24": {"type": "qual", "colors": [[179,226,205], [253,205,172], [203,213,232], [244,202,228]]},
    "pastel25": {"type": "qual", "colors": [[179,226,205], [253,205,172], [203,213,232], [244,202,228], [230,245,201]]},
    "pastel26": {"type": "qual", "colors": [[179,226,205], [253,205,172], [203,213,232], [244,202,228], [230,245,201], [255,242,174]]},
    "pastel27": {"type": "qual", "colors": [[179,226,205], [253,205,172], [203,213,232], [244,202,228], [230,245,201], [255,242,174], [241,226,204]]},
    "pastel28": {"type": "qual", "colors": [[179,226,205], [253,205,172], [203,213,232], [244,202,228], [230,245,201], [255,242,174], [241,226,204], [204,204,204]]},
    "piyg10": {"type": "div", "crit_val": 5.5, "colors": [[142,1,82], [197,27,125], [222,119,174], [241,182,218], [253,224,239], [230,245,208], [184,225,134], [127,188,65], [77,146,33], [39,100,25]]},
    "piyg11": {"type": "div", "crit_val": 6.0, "colors": [[142,1,82], [197,27,125], [222,119,174], [241,182,218], [253,224,239], [247,247,247], [230,245,208], [184,225,134], [127,188,65], [77,146,33], [39,100,25]]},
    "piyg3": {"type": "div", "crit_val": 2.0, "colors": [[233,163,201], [247,247,247], [161,215,106]]},
    "piyg4": {"type": "div", "crit_val": 2.5, "colors": [[208,28,139], [241,182,218], [184,225,134], [77,172,38]]},
    "piyg5": {"type": "div", "crit_val": 3.0, "colors": [[208,28,139], [241,182,218], [247,247,247], [184,225,134], [77,172,38]]},
    "piyg6": {"type": "div", "crit_val": 3.5, "colors": [[197,27,125], [233,163,201], [253,224,239], [230,245,208], [161,215,106], [77,146,33]]},
    "piyg7": {"type": "div", "crit_val": 4.0, "colors": [[197,27,125], [233,163,201], [253,224,239], [247,247,247], [230,245,208], [161,215,106], [77,146,33]]},
    "piyg8": {"type": "div", "crit_val": 4.5, "colors": [[197,27,125], [222,119,174], [241,182,218], [253,224,239], [230,245,208], [184,225,134], [127,188,65], [77,146,33]]},
    "piyg9": {"type": "div", "crit_val": 5.0, "colors": [[197,27,125], [222,119,174], [241,182,218], [253,224,239], [247,247,247], [230,245,208], [184,225,134], [127,188,65], [77,146,33]]},
    "prgn10": {"type": "div", "crit_val": 5.5, "colors": [[64,0,75], [118,42,131], [153,112,171], [194,165,207], [231,212,232], [217,240,211], [166,219,160], [90,174,97], [27,120,55], [0,68,27]]},
    "prgn11": {"type": "div", "crit_val": 6.0, "colors": [[64,0,75], [118,42,131], [153,112,171], [194,165,207], [231,212,232], [247,247,247], [217,240,211], [166,219,160], [90,174,97], [27,120,55], [0,68,27]]},
    "prgn3": {"type": "div", "crit_val": 2.0, "colors": [[175,141,195], [247,247,247], [127,191,123]]},
    "prgn4": {"type": "div", "crit_val": 2.5, "colors": [[123,50,148], [194,165,207], [166,219,160], [0,136,55]]},
    "prgn5": {"type": "div", "crit_val": 3.0, "colors": [[123,50,148], [194,165,207], [247,247,247], [166,219,160], [0,136,55]]},
    "prgn6": {"type": "div", "crit_val": 3.5, "colors": [[118,42,131], [175,141,195], [231,212,232], [217,240,211], [127,191,123], [27,120,55]]},
    "prgn7": {"type": "div", "crit_val": 4.0, "colors": [[118,42,131], [175,141,195], [231,212,232], [247,247,247], [217,240,211], [127,191,123], [27,120,55]]},
    "prgn8": {"type": "div", "crit_val": 4.5, "colors": [[118,42,131], [153,112,171], [194,165,207], [231,212,232], [217,240,211], [166,219,160], [90,174,97], [27,120,55]]},
    "prgn9": {"type": "div", "crit_val": 5.0, "colors": [[118,42,131], [153,112,171], [194,165,207], [231,212,232], [247,247,247], [217,240,211], [166,219,160], [90,174,97], [27,120,55]]},
    "pubu3": {"type": "seq", "colors": [[236,231,242], [166,189,219], [43,140,190]]},
    "pubu4": {"type": "seq", "colors": [[241,238,246], [189,201,225], [116,169,207], [5,112,176]]},
    "pubu5": {"type": "seq", "colors": [[241,238,246], [189,201,225], [116,169,207], [43,140,190], [4,90,141]]},
    "pubu6": {"type": "seq", "colors": [[241,238,246], [208,209,230], [166,189,219], [116,169,207], [43,140,190], [4,90,141]]},
    "pubu7": {"type": "seq", "colors": [[241,238,246], [208,209,230], [166,189,219], [116,169,207], [54,144,192], [5,112,176], [3,78,123]]},
    "pubu8": {"type": "seq", "colors": [[255,247,251], [236,231,242], [208,209,230], [166,189,219], [116,169,207], [54,144,192], [5,112,176], [3,78,123]]},
    "pubu9": {"type": "seq", "colors": [[255,247,251], [236,231,242], [208,209,230], [166,189,219], [116,169,207], [54,144,192], [5,112,176], [4,90,141], [2,56,88]]},
    "pubugn3": {"type": "seq", "colors": [[236,226,240], [166,189,219], [28,144,153]]},
    "pubugn4": {"type": "seq", "colors": [[246,239,247], [189,201,225], [103,169,207], [2,129,138]]},
    "pubugn5": {"type": "seq", "colors": [[246,239,247], [189,201,225], [103,169,207], [28,144,153], [1,108,89]]},
    "pubugn6": {"type": "seq", "colors": [[246,239,247], [208,209,230], [166,189,219], [103,169,207], [28,144,153], [1,108,89]]},
    "pubugn7": {"type": "seq", "colors": [[246,239,247], [208,209,230], [166,189,219], [103,169,207], [54,144,192], [2,129,138], [1,100,80]]},
    "pubugn8": {"type": "seq", "colors": [[255,247,251], [236,226,240], [208,209,230], [166,189,219], [103,169,207], [54,144,192], [2,129,138], [1,100,80]]},
    "pubugn9": {"type": "seq", "colors": [[255,247,251], [236,226,240], [208,209,230], [166,189,219], [103,169,207], [54,144,192], [2,129,138], [1,108,89], [1,70,54]]},
    "puor10": {"type": "div", "crit_val": 5.5, "colors": [[127,59,8], [179,88,6], [224,130,20], [253,184,99], [254,224,182], [216,218,235], [178,171,210], [128,115,172], [84,39,136], [45,0,75]]},
    "puor11": {"type": "div", "crit_val": 6.0, "colors": [[127,59,8], [179,88,6], [224,130,20], [253,184,99], [254,224,182], [247,247,247], [216,218,235], [178,171,210], [128,115,172], [84,39,136], [45,0,75]]},
    "puor3": {"type": "div", "crit_val": 2.0, "colors": [[241,163,64], [247,247,247], [153,142,195]]},
    "puor4": {"type": "div", "crit_val": 2.5, "colors": [[230,97,1], [253,184,99], [178,171,210], [94,60,153]]},
    "puor5": {"type": "div", "crit_val": 3.0, "colors": [[230,97,1], [253,184,99], [247,247,247], [178,171,210], [94,60,153]]},
    "puor6": {"type": "div", "crit_val": 3.5, "colors": [[179,88,6], [241,163,64], [254,224,182], [216,218,235], [153,142,195], [84,39,136]]},
    "puor7": {"type": "div", "crit_val": 4.0, "colors": [[179,88,6], [241,163,64], [254,224,182], [247,247,247], [216,218,235], [153,142,195], [84,39,136]]},
    "puor8": {"type": "div", "crit_val": 4.5, "colors": [[179,88,6], [224,130,20], [253,184,99], [254,224,182], [216,218,235], [178,171,210], [128,115,172], [84,39,136]]},
    "puor9": {"type": "div", "crit_val": 5.0, "colors": [[179,88,6], [224,130,20], [253,184,99], [254,224,182], [247,247,247], [216,218,235], [178,171,210], [128,115,172], [84,39,136]]},
    "purd3": {"type": "seq", "colors": [[231,225,239], [201,148,199], [221,28,119]]},
    "purd4": {"type": "seq", "colors": [[241,238,246], [215,181,216], [223,101,176], [206,18,86]]},
    "purd5": {"type": "seq", "colors": [[241,238,246], [215,181,216], [223,101,176], [221,28,119], [152,0,67]]},
    "purd6": {"type": "seq", "colors": [[241,238,246], [212,185,218], [201,148,199], [223,101,176], [221,28,119], [152,0,67]]},
    "purd7": {"type": "seq", "colors": [[241,238,246], [212,185,218], [201,148,199], [223,101,176], [231,41,138], [206,18,86], [145,0,63]]},
    "purd8": {"type": "seq", "colors": [[247,244,249], [231,225,239], [212,185,218], [201,148,199], [223,101,176], [231,41,138], [206,18,86], [145,0,63]]},
    "purd9": {"type": "seq", "colors": [[247,244,249], [231,225,239], [212,185,218], [201,148,199], [223,101,176], [231,41,138], [206,18,86], [152,0,67], [103,0,31]]},
    "purples3": {"type": "seq", "colors": [[239,237,245], [188,189,220], [117,107,177]]},
    "purples4": {"type": "seq", "colors": [[242,240,247], [203,201,226], [158,154,200], [106,81,163]]},
    "purples5": {"type": "seq", "colors": [[242,240,247], [203,201,226], [158,154,200], [117,107,177], [84,39,143]]},
    "purples6": {"type": "seq", "colors": [[242,240,247], [218,218,235], [188,189,220], [158,154,200], [117,107,177], [84,39,143]]},
    "purples7": {"type": "seq", "colors": [[242,240,247], [218,218,235], [188,189,220], [158,154,200], [128,125,186], [106,81,163], [74,20,134]]},
    "purples8": {"type": "seq", "colors": [[252,251,253], [239,237,245], [218,218,235], [188,189,220], [158,154,200], [128,125,186], [106,81,163], [74,20,134]]},
    "purples9": {"type": "seq", "colors": [[252,251,253], [239,237,245], [218,218,235], [188,189,220], [158,154,200], [128,125,186], [106,81,163], [84,39,143], [63,0,125]]},
    "rdbu10": {"type": "div", "crit_val": 5.5, "colors": [[103,0,31], [178,24,43], [214,96,77], [244,165,130], [253,219,199], [209,229,240], [146,197,222], [67,147,195], [33,102,172], [5,48,97]]},
    "rdbu11": {"type": "div", "crit_val": 6.0, "colors": [[103,0,31], [178,24,43], [214,96,77], [244,165,130], [253,219,199], [247,247,247], [209,229,240], [146,197,222], [67,147,195], [33,102,172], [5,48,97]]},
    "rdbu3": {"type": "div", "crit_val": 2.0, "colors": [[239,138,98], [247,247,247], [103,169,207]]},
    "rdbu4": {"type": "div", "crit_val": 2.5, "colors": [[202,0,32], [244,165,130], [146,197,222], [5,113,176]]},
    "rdbu5": {"type": "div", "crit_val": 3.0, "colors": [[202,0,32], [244,165,130], [247,247,247], [146,197,222], [5,113,176]]},
    "rdbu6": {"type": "div", "crit_val": 3.5, "colors": [[178,24,43], [239,138,98], [253,219,199], [209,229,240], [103,169,207], [33,102,172]]},
    "rdbu7": {"type": "div", "crit_val": 4.0, "colors": [[178,24,43], [239,138,98], [253,219,199], [247,247,247], [209,229,240], [103,169,207], [33,102,172]]},
    "rdbu8": {"type": "div", "crit_val": 4.5, "colors": [[178,24,43], [214,96,77], [244,165,130], [253,219,199], [209,229,240], [146,197,222], [67,147,195], [33,102,172]]},
    "rdbu9": {"type": "div", "crit_val": 5.0, "colors": [[178,24,43], [214,96,77], [244,165,130], [253,219,199], [247,247,247], [209,229,240], [146,197,222], [67,147,195], [33,102,172]]},
    "rdgy10": {"type": "div", "crit_val": 5.5, "colors": [[103,0,31], [178,24,43], [214,96,77], [244,165,130], [253,219,199], [224,224,224], [186,186,186], [135,135,135], [77,77,77], [26,26,26]]},
    "rdgy11": {"type": "div", "crit_val": 6.0, "colors": [[103,0,31], [178,24,43], [214,96,77], [244,165,130], [253,219,199], [255,255,255], [224,224,224], [186,186,186], [135,135,135], [77,77,77], [26,26,26]]},
    "rdgy3": {"type": "div", "crit_val": 2.0, "colors": [[239,138,98], [255,255,255], [153,153,153]]},
    "rdgy4": {"type": "div", "crit_val": 2.5, "colors": [[202,0,32], [244,165,130], [186,186,186], [64,64,64]]},
    "rdgy5": {"type": "div", "crit_val": 3.0, "colors": [[202,0,32], [244,165,130], [255,255,255], [186,186,186], [64,64,64]]},
    "rdgy6": {"type": "div", "crit_val": 3.5, "colors": [[178,24,43], [239,138,98], [253,219,199], [224,224,224], [153,153,153], [77,77,77]]},
    "rdgy7": {"type": "div", "crit_val": 4.0, "colors": [[178,24,43], [239,138,98], [253,219,199], [255,255,255], [224,224,224], [153,153,153], [77,77,77]]},
    "rdgy8": {"type": "div", "crit_val": 4.5, "colors": [[178,24,43], [214,96,77], [244,165,130], [253,219,199], [224,224,224], [186,186,186], [135,135,135], [77,77,77]]},
    "rdgy9": {"type": "div", "crit_val": 5.0, "colors": [[178,24,43], [214,96,77], [244,165,130], [253,219,199], [255,255,255], [224,224,224], [186,186,186], [135,135,135], [77,77,77]]},
    "rdpu3": {"type": "seq", "colors": [[253,224,221], [250,159,181], [197,27,138]]},
    "rdpu4": {"type": "seq", "colors": [[254,235,226], [251,180,185], [247,104,161], [174,1,126]]},
    "rdpu5": {"type": "seq", "colors": [[254,235,226], [251,180,185], [247,104,161], [197,27,138], [122,1,119]]},
    "rdpu6": {"type": "seq", "colors": [[254,235,226], [252,197,192], [250,159,181], [247,104,161], [197,27,138], [122,1,119]]},
    "rdpu7": {"type": "seq", "colors": [[254,235,226], [252,197,192], [250,159,181], [247,104,161], [221,52,151], [174,1,126], [122,1,119]]},
    "rdpu8": {"type": "seq", "colors": [[255,247,243], [253,224,221], [252,197,192], [250,159,181], [247,104,161], [221,52,151], [174,1,126], [122,1,119]]},
    "rdpu9": {"type": "seq", "colors": [[255,247,243], [253,224,221], [252,197,192], [250,159,181], [247,104,161], [221,52,151], [174,1,126], [122,1,119], [73,0,106]]},
    "rdylbu10": {"type": "div", "crit_val": 5.5, "colors": [[165,0,38], [215,48,39], [244,109,67], [253,174,97], [254,224,144], [224,243,248], [171,217,233], [116,173,209], [69,117,180], [49,54,149]]},
    "rdylbu11": {"type": "div", "crit_val": 6.0, "colors": [[165,0,38], [215,48,39], [244,109,67], [253,174,97], [254,224,144], [255,255,191], [224,243,248], [171,217,233], [116,173,209], [69,117,180], [49,54,149]]},
    "rdylbu3": {"type": "div", "crit_val": 2.0, "colors": [[252,141,89], [255,255,191], [145,191,219]]},
    "rdylbu4": {"type": "div", "crit_val": 2.5, "colors": [[215,25,28], [253,174,97], [171,217,233], [44,123,182]]},
    "rdylbu5": {"type": "div", "crit_val": 3.0, "colors": [[215,25,28], [253,174,97], [255,255,191], [171,217,233], [44,123,182]]},
    "rdylbu6": {"type": "div", "crit_val": 3.5, "colors": [[215,48,39], [252,141,89], [254,224,144], [224,243,248], [145,191,219], [69,117,180]]},
    "rdylbu7": {"type": "div", "crit_val": 4.0, "colors": [[215,48,39], [252,141,89], [254,224,144], [255,255,191], [224,243,248], [145,191,219], [69,117,180]]},
    "rdylbu8": {"type": "div", "crit_val": 4.5, "colors": [[215,48,39], [244,109,67], [253,174,97], [254,224,144], [224,243,248], [171,217,233], [116,173,209], [69,117,180]]},
    "rdylbu9": {"type": "div", "crit_val": 5.0, "colors": [[215,48,39], [244,109,67], [253,174,97], [254,224,144], [255,255,191], [224,243,248], [171,217,233], [116,173,209], [69,117,180]]},
    "rdylgn10": {"type": "div", "crit_val": 5.5, "colors": [[165,0,38], [215,48,39], [244,109,67], [253,174,97], [254,224,139], [217,239,139], [166,217,106], [102,189,99], [26,152,80], [0,104,55]]},
    "rdylgn11": {"type": "div", "crit_val": 6.0, "colors": [[165,0,38], [215,48,39], [244,109,67], [253,174,97], [254,224,139], [255,255,191], [217,239,139], [166,217,106], [102,189,99], [26,152,80], [0,104,55]]},
    "rdylgn3": {"type": "div", "crit_val": 2.0, "colors": [[252,141,89], [255,255,191], [145,207,96]]},
    "rdylgn4": {"type": "div", "crit_val": 2.5, "colors": [[215,25,28], [253,174,97], [166,217,106], [26,150,65]]},
    "rdylgn5": {"type": "div", "crit_val": 3.0, "colors": [[215,25,28], [253,174,97], [255,255,191], [166,217,106], [26,150,65]]},
    "rdylgn6": {"type": "div", "crit_val": 3.5, "colors": [[215,48,39], [252,141,89], [254,224,139], [217,239,139], [145,207,96], [26,152,80]]},
    "rdylgn7": {"type": "div", "crit_val": 4.0, "colors": [[215,48,39], [252,141,89], [254,224,139], [255,255,191], [217,239,139], [145,207,96], [26,152,80]]},
    "rdylgn8": {"type": "div", "crit_val": 4.5, "colors": [[215,48,39], [244,109,67], [253,174,97], [254,224,139], [217,239,139], [166,217,106], [102,189,99], [26,152,80]]},
    "rdylgn9": {"type": "div", "crit_val": 5.0, "colors": [[215,48,39], [244,109,67], [253,174,97], [254,224,139], [255,255,191], [217,239,139], [166,217,106], [102,189,99], [26,152,80]]},
    "reds3": {"type": "seq", "colors": [[254,224,210], [252,146,114], [222,45,38]]},
    "reds4": {"type": "seq", "colors": [[254,229,217], [252,174,145], [251,106,74], [203,24,29]]},
    "reds5": {"type": "seq", "colors": [[254,229,217], [252,174,145], [251,106,74], [222,45,38], [165,15,21]]},
    "reds6": {"type": "seq", "colors": [[254,229,217], [252,187,161], [252,146,114], [251,106,74], [222,45,38], [165,15,21]]},
    "reds7": {"type": "seq", "colors": [[254,229,217], [252,187,161], [252,146,114], [251,106,74], [239,59,44], [203,24,29], [153,0,13]]},
    "reds8": {"type": "seq", "colors": [[255,245,240], [254,224,210], [252,187,161], [252,146,114], [251,106,74], [239,59,44], [203,24,29], [153,0,13]]},
    "reds9": {"type": "seq", "colors": [[255,245,240], [254,224,210], [252,187,161], [252,146,114], [251,106,74], [239,59,44], [203,24,29], [165,15,21], [103,0,13]]},
    "set13": {"type": "qual", "colors": [[228,26,28], [55,126,184], [77,175,74]]},
    "set14": {"type": "qual", "colors": [[228,26,28], [55,126,184], [77,175,74], [152,78,163]]},
    "set15": {"type": "qual", "colors": [[228,26,28], [55,126,184], [77,175,74], [152,78,163], [255,127,0]]},
    "set16": {"type": "qual", "colors": [[228,26,28], [55,126,184], [77,175,74], [152,78,163], [255,127,0], [255,255,51]]},
    "set17": {"type": "qual", "colors": [[228,26,28], [55,126,184], [77,175,74], [152,78,163], [255,127,0], [255,255,51], [166,86,40]]},
    "set18": {"type": "qual", "colors": [[228,26,28], [55,126,184], [77,175,74], [152,78,163], [255,127,0], [255,255,51], [166,86,40], [247,129,191]]},
    "set19": {"type": "qual", "colors": [[228,26,28], [55,126,184], [77,175,74], [152,78,163], [255,127,0], [255,255,51], [166,86,40], [247,129,191], [153,153,153]]},
    "set23": {"type": "qual", "colors": [[102,194,165], [252,141,98], [141,160,203]]},
    "set24": {"type": "qual", "colors": [[102,194,165], [252,141,98], [141,160,203], [231,138,195]]},
    "set25": {"type": "qual", "colors": [[102,194,165], [252,141,98], [141,160,203], [231,138,195], [166,216,84]]},
    "set26": {"type": "qual", "colors": [[102,194,165], [252,141,98], [141,160,203], [231,138,195], [166,216,84], [255,217,47]]},
    "set27": {"type": "qual", "colors": [[102,194,165], [252,141,98], [141,160,203], [231,138,195], [166,216,84], [255,217,47], [229,196,148]]},
    "set28": {"type": "qual", "colors": [[102,194,165], [252,141,98], [141,160,203], [231,138,195], [166,216,84], [255,217,47], [229,196,148], [179,179,179]]},
    "set310": {"type": "qual", "colors": [[141,211,199], [255,255,179], [190,186,218], [251,128,114], [128,177,211], [253,180,98], [179,222,105], [252,205,229], [217,217,217], [188,128,189]]},
    "set311": {"type": "qual", "colors": [[141,211,199], [255,255,179], [190,186,218], [251,128,114], [128,177,211], [253,180,98], [179,222,105], [252,205,229], [217,217,217], [188,128,189], [204,235,197]]},
    "set312": {"type": "qual", "colors": [[141,211,199], [255,255,179], [190,186,218], [251,128,114], [128,177,211], [253,180,98], [179,222,105], [252,205,229], [217,217,217], [188,128,189], [204,235,197], [255,237,111]]},
    "set33": {"type": "qual", "colors": [[141,211,199], [255,255,179], [190,186,218]]},
    "set34": {"type": "qual", "colors": [[141,211,199], [255,255,179], [190,186,218], [251,128,114]]},
    "set35": {"type": "qual", "colors": [[141,211,199], [255,255,179], [190,186,218], [251,128,114], [128,177,211]]},
    "set36": {"type": "qual", "colors": [[141,211,199], [255,255,179], [190,186,218], [251,128,114], [128,177,211], [253,180,98]]},
    "set37": {"type": "qual", "colors": [[141,211,199], [255,255,179], [190,186,218], [251,128,114], [128,177,211], [253,180,98], [179,222,105]]},
    "set38": {"type": "qual", "colors": [[141,211,199], [255,255,179], [190,186,218], [251,128,114], [128,177,211], [253,180,98], [179,222,105], [252,205,229]]},
    "set39": {"type": "qual", "colors": [[141,211,199], [255,255,179], [190,186,218], [251,128,114], [128,177,211], [253,180,98], [179,222,105], [252,205,229], [217,217,217]]},
    "spectral10": {"type": "div", "crit_val": 5.5, "colors": [[158,1,66], [213,62,79], [244,109,67], [253,174,97], [254,224,139], [230,245,152], [171,221,164], [102,194,165], [50,136,189], [94,79,162]]},
    "spectral11": {"type": "div", "crit_val": 6.0, "colors": [[158,1,66], [213,62,79], [244,109,67], [253,174,97], [254,224,139], [255,255,191], [230,245,152], [171,221,164], [102,194,165], [50,136,189], [94,79,162]]},
    "spectral3": {"type": "div", "crit_val": 2.0, "colors": [[252,141,89], [255,255,191], [153,213,148]]},
    "spectral4": {"type": "div", "crit_val": 2.5, "colors": [[215,25,28], [253,174,97], [171,221,164], [43,131,186]]},
    "spectral5": {"type": "div", "crit_val": 3.0, "colors": [[215,25,28], [253,174,97], [255,255,191], [171,221,164], [43,131,186]]},
    "spectral6": {"type": "div", "crit_val": 3.5, "colors": [[213,62,79], [252,141,89], [254,224,139], [230,245,152], [153,213,148], [50,136,189]]},
    "spectral7": {"type": "div", "crit_val": 4.0, "colors": [[213,62,79], [252,141,89], [254,224,139], [255,255,191], [230,245,152], [153,213,148], [50,136,189]]},
    "spectral8": {"type": "div", "crit_val": 4.5, "colors": [[213,62,79], [244,109,67], [253,174,97], [254,224,139], [230,245,152], [171,221,164], [102,194,165], [50,136,189]]},
    "spectral9": {"type": "div", "crit_val": 5.0, "colors": [[213,62,79], [244,109,67], [253,174,97], [254,224,139], [255,255,191], [230,245,152], [171,221,164], [102,194,165], [50,136,189]]},
    "ylgn3": {"type": "seq", "colors": [[247,252,185], [173,221,142], [49,163,84]]},
    "ylgn4": {"type": "seq", "colors": [[255,255,204], [194,230,153], [120,198,121], [35,132,67]]},
    "ylgn5": {"type": "seq", "colors": [[255,255,204], [194,230,153], [120,198,121], [49,163,84], [0,104,55]]},
    "ylgn6": {"type": "seq", "colors": [[255,255,204], [217,240,163], [173,221,142], [120,198,121], [49,163,84], [0,104,55]]},
    "ylgn7": {"type": "seq", "colors": [[255,255,204], [217,240,163], [173,221,142], [120,198,121], [65,171,93], [35,132,67], [0,90,50]]},
    "ylgn8": {"type": "seq", "colors": [[255,255,229], [247,252,185], [217,240,163], [173,221,142], [120,198,121], [65,171,93], [35,132,67], [0,90,50]]},
    "ylgn9": {"type": "seq", "colors": [[255,255,229], [247,252,185], [217,240,163], [173,221,142], [120,198,121], [65,171,93], [35,132,67], [0,104,55], [0,69,41]]},
    "ylgnbu3": {"type": "seq", "colors": [[237,248,177], [127,205,187], [44,127,184]]},
    "ylgnbu4": {"type": "seq", "colors": [[255,255,204], [161,218,180], [65,182,196], [34,94,168]]},
    "ylgnbu5": {"type": "seq", "colors": [[255,255,204], [161,218,180], [65,182,196], [44,127,184], [37,52,148]]},
    "ylgnbu6": {"type": "seq", "colors": [[255,255,204], [199,233,180], [127,205,187], [65,182,196], [44,127,184], [37,52,148]]},
    "ylgnbu7": {"type": "seq", "colors": [[255,255,204], [199,233,180], [127,205,187], [65,182,196], [29,145,192], [34,94,168], [12,44,132]]},
    "ylgnbu8": {"type": "seq", "colors": [[255,255,217], [237,248,177], [199,233,180], [127,205,187], [65,182,196], [29,145,192], [34,94,168], [12,44,132]]},
    "ylgnbu9": {"type": "seq", "colors": [[255,255,217], [237,248,177], [199,233,180], [127,205,187], [65,182,196], [29,145,192], [34,94,168], [37,52,148], [8,29,88]]},
    "ylorbr3": {"type": "seq", "colors": [[255,247,188], [254,196,79], [217,95,14]]},
    "ylorbr4": {"type": "seq", "colors": [[255,255,212], [254,217,142], [254,153,41], [204,76,2]]},
    "ylorbr5": {"type": "seq", "colors": [[255,255,212], [254,217,142], [254,153,41], [217,95,14], [153,52,4]]},
    "ylorbr6": {"type": "seq", "colors": [[255,255,212], [254,227,145], [254,196,79], [254,153,41], [217,95,14], [153,52,4]]},
    "ylorbr7": {"type": "seq", "colors": [[255,255,212], [254,227,145], [254,196,79], [254,153,41], [236,112,20], [204,76,2], [140,45,4]]},
    "ylorbr8": {"type": "seq", "colors": [[255,255,229], [255,247,188], [254,227,145], [254,196,79], [254,153,41], [236,112,20], [204,76,2], [140,45,4]]},
    "ylorbr9": {"type": "seq", "colors": [[255,255,229], [255,247,188], [254,227,145], [254,196,79], [254,153,41], [236,112,20], [204,76,2], [153,52,4], [102,37,6]]},
    "ylorrd3": {"type": "seq", "colors": [[255,237,160], [254,178,76], [240,59,32]]},
    "ylorrd4": {"type": "seq", "colors": [[255,255,178], [254,204,92], [253,141,60], [227,26,28]]},
    "ylorrd5": {"type": "seq", "colors": [[255,255,178], [254,204,92], [253,141,60], [240,59,32], [189,0,38]]},
    "ylorrd6": {"type": "seq", "colors": [[255,255,178], [254,217,118], [254,178,76], [253,141,60], [240,59,32], [189,0,38]]},
    "ylorrd7": {"type": "seq", "colors": [[255,255,178], [254,217,118], [254,178,76], [253,141,60], [252,78,42], [227,26,28], [177,0,38]]},
    "ylorrd8": {"type": "seq", "colors": [[255,255,204], [255,237,160], [254,217,118], [254,178,76], [253,141,60], [252,78,42], [227,26,28], [177,0,38]]},
    "ylorrd9": {"type": "seq", "colors": [[255,255,204], [255,237,160], [254,217,118], [254,178,76], [253,141,60], [252,78,42], [227,26,28], [189,0,38], [128,0,38]]},
}



if (typeof(i2maps) == "undefined") i2maps = {};
i2maps.colorbrewer = (function (){
    var o = {'colortables': colortables};
    
    var interpolate = function(f, a, b){
        return a + (f * (b-a));
    }
    var find_index = function(a, v){for(var i=0; i < a.length; i++){if(v < a[i]) return i}};
    
    var lpad = function(s, len){while(s.length < len){s = '0' + s} return s};
    
    var make_colormap = function(name){
        var colors = o.colortables[name].colors;
        var ncolors = colors.length;
        var ctype = o.colortables[name].type;
        // This function will be called by the user to create an individual
        // colormap, e.g. cm = i2maps.colorbrewer.blues9([10, 100], [255, 255, 255], true, Math.log, Math.exp)
        var f = function(limits, default_color, scale_fn, inv_scale_fn) {
            limits = limits.sort(function(a, b){ return (a - b); });
            console.log(limits);
            if (scale_fn == undefined) scale_fn = function(val){ return val; };
            if (inv_scale_fn == undefined) inv_scale_fn = function(val){ return val; };
            // Limits can contain the following possibilities:
            // If type=qual: the number of limits must be equal to the 
            //               number of colors (one value = one color)
            // If type=seq:  limits can either contain the min/max values,
            //               or the (ncolors+1) class breaks
            // If type=div:  limits can either contain the min/middle/max values,
            //               or the (ncolors+1) class breaks
            // We are now going to create an array containing the lower/upper
            // limits for every available color, so that a color is choosen
            // if: value >= lower_limit && value < upper_limit, except for the
            // biggest class where it is also allowed to have value == upper_limit.
            var stops = [];     // The lower/upper limits for each color.
            if (ctype == 'qual') {
                if (limits.length != ncolors) {
                    console.log('Error. For qualitative color scheme, the number of limits must be equal to the number of colors.');
                }
                for (var i in limits) {
                    // For qualitative scheme, upper and lower limits are the same.
                    stops.push([scale_fn(limits[i]), scale_fn(limits[i])]);
                }
            } else if (ctype == 'seq') {
                if (limits.length == 2) {
                    // We have upper and lower limit only
                    var minval = scale_fn(limits[0]);
                    var maxval = scale_fn(limits[1]);
                    var step = (maxval - minval) / ncolors;
                    for (var i = 0; i <= ncolors; i++) {
                        stops.push([minval + i*step, minval + (i+1)*step]);
                    }
                } else if (limits.length == (ncolors + 1)) {
                    for (var i=0; i < (limits.length - 1); i++) {
                        stops.push([scale_fn(limits[i]), scale_fn(limits[i+1])]);
                    }
                } else if (limits.length == (ncolors - 1)) {
                    // We have a value for each limit, except the minimum and maximum values.
                    // The minimum and maximum values are assumed to be infinity.
                    stops.push([-Infinity, scale_fn(limits[0])]);
                    for (var i=0; i < (limits.length - 1); i++) {
                        stops.push([scale_fn(limits[i]), scale_fn(limits[i+1])]);
                    }
                    stops.push([scale_fn(limits[(limits.length-1)]), Infinity]);
                } else {
                    // The number of limits does not match the color scheme.
                    console.log('Error. For sequential color scheme, the number of limits must be either 2, the number of colors + 1, or the number of colors - 1.');
                }
            } else if (ctype == 'div') {
                if (limits.length == (ncolors + 1)) {
                    for (var i=0; i < (limits.length - 1); i++) {
                        stops.push([scale_fn(limits[i]), scale_fn(limits[i+1])]);
                    }
                } else {
                    // The number of limits does not match the color scheme.
                    console.log('Error. For divergent color scheme you must provide all class limits (number of colors + 1).');
                }
            }
            var cm = function(value) {
                var c = default_color;      // The output color.
                var v = scale_fn(value);
                for (var i in stops) {
                    // value >= lower_limit && value < upper_limit, except for the
                    // biggest class where it is also allowed to have value == upper_limit
                    if (v >= stops[i][0] && v < stops[i][1]) {
                        c = colors[i];
                        break;
                    }
                    if (v == stops[stops.length-1][1]) {
                        c = colors[colors.length-1];
                    }
                }
                c.html = function(){
                    return "#" + lpad(this[0].toString(16), 2) + lpad(this[1].toString(16), 2) + lpad(this[2].toString(16), 2);
                };
                return c;
            }
            cm.stops = stops;
            cm.colors = colors;
            if (default_color == undefined) cm.default_color = [255,255,255]; else cm.default_color = default_color;
            cm.scale_fn = scale_fn;
            cm.inv_scale_fn = inv_scale_fn;
            cm.legend = function(decimals, unit) {
                if (decimals == undefined) { decimals = 2; }
                if (unit == undefined) { unit = ''; }
                var svg = '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">';
                var y = 10;
                for (var i = this.colors.length - 1; i >= 0; i--) {
                    var c = this.colors[i];
                    svg += '<rect x="0" y="' + y + '" width="40" height="20" style="fill: rgb('+ c[0] +','+ c[1] +','+ c[2] +'); stroke: black; stroke-width: 0.5;" />';
                    if (this.stops[i][1] < Infinity) {
                        svg += '<line x1="40" y1="' + y +'" x2="46" y2="' + y +'" style="stroke: black; stroke-width: 0.5;" />';
                        svg += '<text x="50" y="' + (y+6) +'">' + this.inv_scale_fn(this.stops[i][1]).toFixed(decimals) + '</text>';
                    }
                    y += 20;
                }
                if (this.stops[0][0] > -Infinity) {
                    svg += '<line x1="40" y1="' + y +'" x2="46" y2="' + y +'" style="stroke: black; stroke-width: 0.5;" />';
                    svg += '<text x="50" y="' + (y+6) +'">' + this.inv_scale_fn(this.stops[0][0]).toFixed(decimals) + '</text>';
                }
                if (unit != '') {
                    svg += '<text x="0" y="' + (y+30) +'">' + unit + '</text>';
                }
                svg += '</svg>';
                return svg;
            };
            return cm;
        }
        return f;
    }
    
    for (var c in o.colortables) {
        o.__defineGetter__(c, (function(c){return function(){return make_colormap(c)}})(c));
    }
    return o;
        
})();
